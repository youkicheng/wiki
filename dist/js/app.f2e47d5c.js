(function(t){function e(e){for(var a,o,r=e[0],c=e[1],l=e[2],d=0,h=[];d<r.length;d++)o=r[d],n[o]&&h.push(n[o][0]),n[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(h.length)h.shift()();return s.push.apply(s,l||[]),i()}function i(){for(var t,e=0;e<s.length;e++){for(var i=s[e],a=!0,r=1;r<i.length;r++){var c=i[r];0!==n[c]&&(a=!1)}a&&(s.splice(e--,1),t=o(o.s=i[0]))}return t}var a={},n={app:0},s=[];function o(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=a,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(i,a,function(e){return t[e]}.bind(null,a));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;s.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"0090":function(t,e,i){"use strict";var a=i("0681"),n=i.n(a);n.a},"0681":function(t,e,i){},"0b2d":function(t,e,i){"use strict";var a=i("13c3"),n=i.n(a);n.a},1003:function(t,e,i){},"13c3":function(t,e,i){},3669:function(t,e,i){"use strict";var a=i("ed73"),n=i.n(a);n.a},"56d7":function(t,e,i){"use strict";i.r(e);i("cadf"),i("551c"),i("f751"),i("097d");var a=i("2b0e"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("Header"),i("div",{},[i("router-view")],1),i("nav",{attrs:{id:"nav"}},[i("router-link",{staticClass:"home",attrs:{to:"/home"}},[i("i",{staticClass:"el-icon-menu"}),i("div",{staticClass:"home-font"},[t._v("主页")])]),i("router-link",{staticClass:"search",attrs:{to:"/search"}},[i("i",{staticClass:"el-icon-search"})]),i("router-link",{staticClass:"collection",attrs:{to:"/collection"}},[i("i",{staticClass:"el-icon-star-on"}),i("div",{staticClass:"collection-font"},[t._v("收藏")])])],1)],1)},s=[],o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"header",class:{"head-fixed":t.isfixed}},[i("div",{staticClass:"icon-home",on:{click:t.goHome}},[i("i",{staticClass:"el-icon-s-home"})]),i("router-link",{staticClass:"search",attrs:{to:"/search"}},[i("div",{staticClass:"search-box"},[i("span",[t._v("搜索口袋维基")]),i("i",{staticClass:"el-icon-search"})])])],1)},r=[],c={data:function(){return{isfixed:!1}},methods:{goHome:function(){this.$router.push("/home")}}},l=c,u=(i("0090"),i("2877")),d=Object(u["a"])(l,o,r,!1,null,"7c55cdf8",null),h=d.exports,f={components:{Header:h}},p=f,m=(i("5c0b"),Object(u["a"])(p,n,s,!1,null,null,null)),v=m.exports,g=i("8c4f"),b=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home"},[i("nav",{staticClass:"home-nav"},[i("router-link",{staticClass:"recommend",attrs:{to:{name:"recommend"}}},[i("div",[t._v("推荐")])]),i("router-link",{staticClass:"hot-topic",attrs:{to:{name:"hotTopic"}}},[i("div",[t._v("热榜")])]),i("div")],1),i("div",[i("router-view")],1)])},k=[],C=(i("3669"),{}),_=Object(u["a"])(C,b,k,!1,null,"d3dcda0e",null),w=_.exports,y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"search"},[i("div",{staticClass:"search-head"},[i("div",{staticClass:"icon-home",on:{click:t.goHome}},[i("i",{staticClass:"el-icon-s-home"})]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.inputVal,expression:"inputVal"}],ref:"searchInput",staticClass:"search-input",attrs:{type:"text",placeholder:"请输入要查询的内容"},domProps:{value:t.inputVal},on:{input:[function(e){e.target.composing||(t.inputVal=e.target.value)},t.getSearchRealtedTitle]}}),i("span",{staticClass:"cancel",on:{click:t.fallback}},[t._v("取消")])]),t._m(0),i("div",{directives:[{name:"show",rawName:"v-show",value:t.searchRealtedOnlyTitleItems.length,expression:"searchRealtedOnlyTitleItems.length"}],staticClass:"search-related"},[i("ul",{staticClass:"search-related-items"},t._l(t.searchRealtedOnlyTitleItems,function(e){return i("li",{key:e.id,staticClass:"search-related-item",on:{click:function(i){return t.gotoWiki(e.title)}}},[t._v("   \n        "+t._s(e.title)+"\n      ")])}),0),i("div",{staticClass:"black",on:{click:t.clearSearchData}})])])},x=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"search-history"},[i("div",{staticClass:"search-history-clear"},[i("i",{staticClass:"el-icon-delete"}),i("span",[t._v("清除记录")])]),i("div",{staticClass:"search-history-line"},[t._v("搜索记录")]),i("div",[i("ul",[i("li")])])])}],j=i("cebc"),O=i("2f62"),S={data:function(){return{searchTipsPage:0,searchHistoryList:[],inputVal:"",throttleGetSearchRealtedTitleFunc:null}},activated:function(){this.inputAutofocus(),this.getSearchHistotyList()},beforeRouteLeave:function(t,e,i){this.clearSearchData(),i()},computed:Object(j["a"])({},Object(O["c"])(["searchRealtedOnlyTitleItems"])),methods:Object(j["a"])({},Object(O["b"])(["dispatchSearchRelatedAjax"]),Object(O["d"])(["clearSearchRelatedData"]),{goHome:function(){this.$router.push("/home")},inputAutofocus:function(){var t=this;this.$nextTick().then(function(){t.$refs.searchInput.focus()})},fallback:function(){this.$router.go(-1)},getSearchRealtedTitle:function(t){var e=this;if(null==this.throttleGetSearchRealtedTitleFunc){var i=function(t){e.dispatchSearchRelatedAjax(t.target.value)};i(t)}},clearSearchData:function(){this.inputVal="",this.clearSearchRelatedData()},gotoWiki:function(t){this.$router.push({name:"wiki",params:{userId:t}})}})},P=S,I=(i("bddb"),Object(u["a"])(P,y,x,!1,null,"2831a770",null)),$=I.exports,R=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"collection"},[i("nav",{staticClass:"collection-nav"},[i("div",{staticClass:"collection-favorites",attrs:{favoritesList:t.favoritesList}},[t._v("我的收藏")]),i("div",{staticClass:"collection-history"},[t._v("历史")])]),i("div",[i("Favorites")],1)])},T=[],L=(i("4917"),i("a4bb")),E=i.n(L),H=(i("ac6a"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("ul",t._l(t.favoritesList,function(e,a){return i("li",{key:e[0],ref:"favoritesItem"+a,refInFor:!0},[i("span",[t._v(t._s(e[1]))])])}),0)])}),W=[],A={props:{favoritesList:{type:Array}}},D=A,F=Object(u["a"])(D,H,W,!1,null,null,null),M=F.exports,V={components:{Favorites:M},data:function(){return{favoritesList:[]}},methods:{getFavorites:function(){var t=this;this.favoritesList=[],E()(localStorage).forEach(function(e){e.match(/^\d+$/)&&t.favoritesList.push([e,JSON.parse(t.$local.get(e))])})},activated:function(){this.getFavorites()}}},z=V,J=(i("0b2d"),Object(u["a"])(z,R,T,!1,null,"4c94dee7",null)),N=J.exports,q=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._v("\n  recommend\n")])},G=[],B={},K=Object(u["a"])(B,q,G,!1,null,null,null),Q=K.exports,U=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._v("\n hot\n")])},X=[],Y={},Z=Object(u["a"])(Y,U,X,!1,null,null,null),tt=Z.exports,et=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wiki"},[t.wikiPage?i("div",{staticClass:"content"},[t._l(t.wikiContent.sections,function(e){return i("p",{key:"sections"+e.id,domProps:{innerHTML:t._s(e.text)}})}),t._l(t.wikiContent.remaining,function(e){return i("p",{key:"remaining"+e.id,domProps:{innerHTML:t._s(e.text)}})})],2):t._e(),t.wikiPage?i("div",{staticClass:"collectItem",class:{isCollected:t.wikiContent.isCollected},on:{click:t.collectItem}},[t._v(t._s(t.wikiContent.isCollected?"已收藏":"收藏该词条"))]):t._e()])},it=[],at={name:"wiki",props:["title"],data:function(){return{hideLoadingPage:!1}},watch:{wikiContent:function(){var t=this;this.$nextTick().then(function(){var e=t.wikiContent,i=e.id,a=e.title;t.$local.recordHistory(i,a)})}},created:function(){this.dispathWikiPageAjax(this.$route.params.userId)},computed:Object(j["a"])({},Object(O["e"])({wikiPage:function(t){return t.wiki.wikiPage}}),Object(O["c"])(["wikiContent"])),methods:Object(j["a"])({},Object(O["b"])(["dispathWikiPageAjax"]),Object(O["d"])(["getWikiPage","toggleWikiCollectedStatus"]),{collectItem:function(){var t=this.$local,e=t.set,i=t.remove,a=this.wikiContent,n=a.id,s=a.title,o=a.isCollected;o?(i(n),this.toggleWikiCollectedStatus(!1)):(e(n,s),this.toggleWikiCollectedStatus(!0))}})},nt=at,st=(i("ae3e"),Object(u["a"])(nt,et,it,!1,null,"305f49bd",null)),ot=st.exports;a["default"].use(g["a"]);var rt=new g["a"]({routes:[{path:"/",redirect:"/home"},{path:"/home",redirect:"/home/recommend",name:"home",component:w,children:[{path:"/home/recommend",name:"recommend",component:Q},{path:"/home/hotTopic",name:"hotTopic",component:tt}]},{path:"/search",name:"search",component:$},{path:"/collection",name:"collection",component:N},{path:"/wiki/:userId",name:"wiki",component:ot}]}),ct={exploreList:function(t){return t.randomList.map(function(t){var e=t.pageid,i=t.title,a=t.extract,n=t.thumbnail,s=t.isCollected;return n=n&&n.source,{id:e,title:i,extract:a,isCollected:s,thumbnail:n}})}},lt={},ut=i("bc3a"),dt=i.n(ut),ht={dispatchExploreDataAjax:function(t){for(var e=t.commit,i=0;i<6;i++)dt.a.get("https://zh.wikipedia.org/api/rest_v1/page/random/summary").then(function(t){e("getRandomDate",t.data)})}},ft={wikiPage:null},pt={wikiContent:function(t){var e=t.wikiPage;if(e)return{title:e.lead.display,id:e.lead.id,isCollected:e.isCollected,sections:e.lead.sections,remaining:e.remaining.sections}}},mt={getWikiPage:function(t,e){t.wikiPage=e},toggleWikiCollectedStatus:function(t,e){t.wikiPage.isCollected=e,console.log(t.wikiPage)}},vt={dispathWikiPageAjax:function(t,e){var i=t.commit;dt.a.get("https://zh.wikipedia.org/api/rest_v1/page/mobile-sections/".concat(e)).then(function(t){console.log("ddd");var e=t.data;i("getWikiPage",e)}).catch(function(t){})}},gt={state:ft,getters:pt,mutations:mt,actions:vt},bt={searchRealtedItems:[]},kt={searchRealtedOnlyTitleItems:function(t){var e=t.searchRealtedItems;return E()(e).map(function(t){return{id:e[t].pageid,title:e[t].title}})}},Ct={getSearchRelatedData:function(t,e){t.searchRealtedItems=e||{}},clearSearchRelatedData:function(t){t.searchRealtedItems={}}},_t={dispatchSearchRelatedAjax:function(t,e){var i=t.commit;dt.a.get("https://zh.m.wikipedia.org/w/api.php?origin=*&gpssearch=".concat(e,"&srsearch=").concat(e||"","&action=query&continue=&coprop=type|dim&format=json&generator=prefixsearch&gpslimit=24&gpsnamespace=0&list=search&pilimit=24&piprop=thumbnail&pithumbsize=120&prop=pageterms|pageimages|revisions|coordinates&redirects=1&rvprop=ids&srinfo=suggestion&srlimit=1&srnamespace=0&sroffset=0&srprop=&srwhat=text&wbptterms=description")).then(function(t){var e=t.data.error?{}:t.data.query.pages;i("getSearchRelatedData",e)}).catch(function(t){})}},wt={state:bt,getters:kt,mutations:Ct,actions:_t};a["default"].use(O["a"]);var yt=new O["a"].Store({state:{randomList:[],hotList:[]},getters:ct,mutations:lt,actions:ht,modules:{wiki:gt,search:wt}}),xt=i("5c96"),jt=i.n(xt),Ot=(i("0fae"),i("0a0d")),St=i.n(Ot),Pt=i("f499"),It=i.n(Pt),$t={set:function(t,e){localStorage.setItem(t,It()(e))},get:function(t){return localStorage.getItem(t)},remove:function(t){localStorage.removeItem(t)},recordHistory:function(t,e){var i=St()(),a=JSON.parse(localStorage.getItem("history"))||{};a[t]={id:t,title:e,recordTime:i},localStorage.setItem("history",It()(a))}},Rt={install:function(t){t.prototype.$local=$t}};a["default"].use(jt.a),a["default"].use(Rt),a["default"].config.productionTip=!1,new a["default"]({router:rt,store:yt,render:function(t){return t(v)}}).$mount("#app")},"5c0b":function(t,e,i){"use strict";var a=i("5e27"),n=i.n(a);n.a},"5e27":function(t,e,i){},"8f74":function(t,e,i){},ae3e:function(t,e,i){"use strict";var a=i("8f74"),n=i.n(a);n.a},bddb:function(t,e,i){"use strict";var a=i("1003"),n=i.n(a);n.a},ed73:function(t,e,i){}});
//# sourceMappingURL=app.f2e47d5c.js.map